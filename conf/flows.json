[{"id":"ef852b4a.99e7f8","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"9396fa4a.c58608","type":"http in","z":"ef852b4a.99e7f8","name":"","url":"/mysite","method":"get","swaggerDoc":"","x":390,"y":280,"wires":[["1ae9c5a3.32fe0a"]]},{"id":"d276a7bf.7f0578","type":"http in","z":"ef852b4a.99e7f8","name":"","url":"/mysitepost","method":"post","swaggerDoc":"","x":410,"y":480,"wires":[["68ea35fa.999cfc","8822f29a.e95c5"]]},{"id":"1ae9c5a3.32fe0a","type":"function","z":"ef852b4a.99e7f8","name":"msg.url = \"mysitepost\";","func":"msg.url = \"mysitepost\";\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":280,"wires":[["449314f9.377c64"]]},{"id":"68ea35fa.999cfc","type":"debug","z":"ef852b4a.99e7f8","name":"mysitepost","active":true,"console":"false","complete":"payload","x":1050,"y":480,"wires":[]},{"id":"8dcfd043.4a3898","type":"http response","z":"ef852b4a.99e7f8","name":"","x":1070,"y":440,"wires":[]},{"id":"19e2c33c.bf5ecd","type":"template","z":"ef852b4a.99e7f8","name":"CSS","field":"payload.style","fieldType":"msg","format":"html","syntax":"mustache","template":"input[type=text], select {\n    width: 100%;\n    padding: 12px 20px;\n    margin: 8px 0;\n    display: inline-block;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    box-sizing: border-box;\n}\n\ninput[type=submit] {\n    width: 100%;\n    background-color: #4CAF50;\n    color: white;\n    padding: 14px 20px;\n    margin: 8px 0;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n}\n\ninput[type=submit]:hover {\n    background-color: #45a049;\n}\n\ndiv {\n    border-radius: 5px;\n    background-color: #f2f2f2;\n    padding: 20px;\n}","x":790,"y":380,"wires":[["3c3b49e2.ef866e"]]},{"id":"449314f9.377c64","type":"template","z":"ef852b4a.99e7f8","name":"JavaScript","field":"payload.script","fieldType":"msg","format":"javascript","syntax":"plain","template":"$(document).ready(function(e) {\n    \n    $(\"form[ajax=true]\").submit(function(e) {\n        \n        e.preventDefault();\n        \n        var form_data = $(this).serialize();\n        var form_url = $(this).attr(\"action\");\n        var form_method = $(this).attr(\"method\").toUpperCase();\n        \n        $(\"#loadingimg\").show();\n        \n        $.ajax({\n            url: form_url, \n            type: form_method,      \n            data: form_data,     \n            cache: false,\n            success: function(returnhtml){                          \n                $(\"#result\").html(returnhtml); \n                $(\"#loadingimg\").hide();                    \n            }           \n        });    \n        \n    });\n    \n});","x":630,"y":380,"wires":[["19e2c33c.bf5ecd"]]},{"id":"64d4fae.9174c84","type":"http response","z":"ef852b4a.99e7f8","name":"","x":1070,"y":380,"wires":[]},{"id":"3c3b49e2.ef866e","type":"template","z":"ef852b4a.99e7f8","name":"HTML","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n    <title>My Site</title>\n    <meta name=\"viewport\" content=\"initial-scale=1.0, user-scalable=no\">\n    <meta charset=\"utf-8\">\n    <script src=\"http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js\"></script>\n    <style>{{{payload.style}}}</style>\n  </head>\n  \n\n    <h2>Using CSS to style an HTML form with AJAX POST and Node-RED</h2>\n    <h4><a href=\"http://www.internetoflego.com\">Internet of LEGO</a></h4>\n\n<div>\n  <form method=\"post\" action=\"/{{url}}\" ajax=\"true\">\n    <label for=\"fname\">First Name</label>\n    <input type=\"text\" id=\"fname\" name=\"firstname\">\n\n    <label for=\"lname\">Last Name</label>\n    <input type=\"text\" id=\"lname\" name=\"lastname\">\n\n    <label for=\"country\">Country</label>\n    <select id=\"country\" name=\"country\">\n      <option value=\"uk\">United Kingdom</option>\n      <option value=\"canada\">Canada</option>\n      <option value=\"usa\">USA</option>\n    </select>\n  \n    <input type=\"submit\" value=\"Submit\">\n  </form>\n</div>\n<div>\n    <span id=\"result\"></span>\n</div>\n\n</body>\n</html>\n<script>{{{payload.script}}}</script>","x":930,"y":380,"wires":[["64d4fae.9174c84"]]},{"id":"7a90ca6.e7a3d34","type":"comment","z":"ef852b4a.99e7f8","name":"Login Form","info":"","x":590,"y":340,"wires":[]},{"id":"dc1a23c5.684d1","type":"function","z":"ef852b4a.99e7f8","name":"return msg.payload to client","func":"msg.payload = 'The following data was submitted and available in the msg.payload: '+msg.payload;\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":440,"wires":[["8dcfd043.4a3898"]]},{"id":"cabefbc2.03d62","type":"comment","z":"ef852b4a.99e7f8","name":"Inject msg object properties","info":"","x":600,"y":240,"wires":[]},{"id":"8822f29a.e95c5","type":"json","z":"ef852b4a.99e7f8","name":"","x":610,"y":440,"wires":[["dc1a23c5.684d1"]]},{"id":"448552ae.f057f4","type":"comment","z":"ef852b4a.99e7f8","name":"Website","info":"","x":370,"y":200,"wires":[]},{"id":"b0b75cbf.595b7","type":"comment","z":"ef852b4a.99e7f8","name":"Form Submission","info":"","x":400,"y":420,"wires":[]},{"id":"8220a594.e77748","type":"comment","z":"ef852b4a.99e7f8","name":"Node-RED Public Site - README","info":"This Flow demonstrates how to create\na simple frontend webpage with Node-RED.\n\nThe public facing page consists of the \nclient side JavaScript, CSS and HTML. \n\nThe important technique is how the mustache \ntemplates are used. Each template will set the\n\"property\" relative to the content. \n\nThe CSS node sets the \"msg.payload.style\" property.\nThe JavaScript node sets the \"msg.payload.script\" property.\nThe HTML node then includes these properties \n<script>{{{payload.script}}}</script>\n<style>{{{payload.style}}}</style>\n\n\nThis example was created by http://www.InternetofLEGO.com\n\n","x":700,"y":100,"wires":[]}]